<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>KakaoMap Navigation Widget</title>
    <style>
        html, body {width:100%;height:100%;margin:0;padding:0;}
        #map {width:100%;height:calc(100% - 150px);}
        #form-container {padding: 10px; background-color: #f1f1f1;}
        input[type="text"] {width: 250px; padding: 5px; margin: 5px;}
        button {padding: 5px 10px; cursor: pointer;}
    </style>
</head>
<body>
    <div id="form-container">
        <p>
            <input type="text" id="start-point" placeholder="Enter starting point (e.g., 서울시청)">
            <input type="text" id="end-point" placeholder="Enter destination (e.g., 강남역)">
            <button onclick="searchRoute()">Find Route</button>
        </p>
    </div>
    <div id="map"></div>
    
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=00a03dac8488d12731e4021756938e72&libraries=services"></script>
    
    <script>
        // REPLACE 'YOUR_KAKAO_JS_KEY' with your actual JavaScript key
        
        // Initialize the map
        var mapContainer = document.getElementById('map');
        var mapOption = { 
            center: new kakao.maps.LatLng(37.566826, 126.9786567), // Seoul City Hall
            level: 3 
        };
        var map = new kakao.maps.Map(mapContainer, mapOption);

        // Geocoder and Directions services
        var geocoder = new kakao.maps.services.Geocoder();
        var directionsService = new kakao.maps.RoadviewClient(); // This is the service for directions
        var polyline;
        var startMarker, endMarker;

        // Function to find the route
        function searchRoute() {
            var startAddr = document.getElementById('start-point').value;
            var endAddr = document.getElementById('end-point').value;

            // First, geocode the start address
            geocoder.addressSearch(startAddr, function(startResult, startStatus) {
                if (startStatus === kakao.maps.services.Status.OK) {
                    var startCoords = new kakao.maps.LatLng(startResult[0].y, startResult[0].x);

                    // Then, geocode the end address
                    geocoder.addressSearch(endAddr, function(endResult, endStatus) {
                        if (endStatus === kakao.maps.services.Status.OK) {
                            var endCoords = new kakao.maps.LatLng(endResult[0].y, endResult[0].x);

                            // Clear previous route and markers
                            if (polyline) polyline.setMap(null);
                            if (startMarker) startMarker.setMap(null);
                            if (endMarker) endMarker.setMap(null);

                            // Display markers
                            startMarker = new kakao.maps.Marker({
                                map: map,
                                position: startCoords
                            });
                            endMarker = new kakao.maps.Marker({
                                map: map,
                                position: endCoords
                            });

                            // Request a driving route
                            directionsService.getRoadview(function(data){
                                // This is a workaround since Kakao Maps does not have a simple driving directions service in the JavaScript SDK.
                                // Instead, we can use an external Directions API, but for this example, we'll draw a simple line.
                                // A more advanced implementation would require a REST API call to the Kakao Mobility Directions API.
                                // The following simply draws a polyline between the two points.
                                var linePath = [startCoords, endCoords];
                                polyline = new kakao.maps.Polyline({
                                    path: linePath,
                                    strokeWeight: 5,
                                    strokeColor: '#FF0000',
                                    strokeOpacity: 0.7,
                                    strokeStyle: 'solid'
                                });
                                polyline.setMap(map);
                                
                                // Adjust map view to fit the route
                                var bounds = new kakao.maps.LatLngBounds();
                                bounds.extend(startCoords);
                                bounds.extend(endCoords);
                                map.setBounds(bounds);
                            }, startCoords);
                        } else {
                            alert('Destination address not found.');
                        }
                    });
                } else {
                    alert('Starting address not found.');
                }
            });
        }
    </script>
</body>
</html>
